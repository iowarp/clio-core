# IOWarp Chimaera Runtime - Docker Compose
#
# Starts a single-node Chimaera runtime using the deploy-cpu container.
# The runtime loads its configuration from ~/.chimaera/chimaera.yaml
# (seeded during image build from chimaera_default.yaml).
#
# Usage:
#   # Start the runtime
#   docker compose up
#
#   # Start in background
#   docker compose up -d
#
#   # View logs
#   docker compose logs -f
#
#   # Stop runtime
#   docker compose down

services:
  iowarp:
    image: iowarp/deploy-cpu:latest
    container_name: iowarp
    hostname: iowarp
    volumes:
      - ./chimaera.yaml:/home/iowarp/.chimaera/chimaera.yaml:ro
    ports:
      - "5555:5555"
    mem_limit: 8g
    command: ["chimaera", "runtime", "start"]
    restart: unless-stopped
